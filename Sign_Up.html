<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ثبت‌نام - Silent Knights</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Berlin+Sans+FB:wght@300;400;500;600;700&family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ========== VARIABLES ========== */
        :root {
            --font-main: "Berlin Sans FB", system-ui, -apple-system, sans-serif;
            --font-mono: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;

            /* Silent Knights Brand Colors */
            --color-primary: #E31E27;
            --color-primary-dark: #15151F;
            --color-secondary: #999A93;
            --color-accent: #E31E27;
            --color-neon: #F8F8F8;
            --color-bg: #030D33;
            --color-bg-secondary: #0A0A0F;
            --color-bg-card: #1A1A24;
            --color-gray: #999A93;
            --color-light: #F8F8F8;
            --color-text: #F8F8F8;
            --color-text-muted: #999A93;

            /* Effects */
            --radius: 16px;
            --radius-small: 8px;
            --shadow: 0 8px 32px rgba(227, 30, 39, 0.3);
            --shadow-neon: 0 0 20px rgba(227, 30, 39, 0.4);
            --shadow-glow: 0 0 40px rgba(227, 30, 39, 0.2);
            --transition-fast: 0.2s;
            --transition-normal: 0.3s;
            --transition-slow: 0.5s;
        }

        /* ========== RESET & BASE ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-main);
            background: linear-gradient(135deg, var(--color-bg) 0%, var(--color-bg-secondary) 100%);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* ========== REGISTER CONTAINER ========== */
        .register-container {
            width: 100%;
            max-width: 480px;
            background: var(--color-bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.03);
            overflow: hidden;
            position: relative;
            transition: all var(--transition-normal) ease;
        }

        .register-container:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-neon);
        }

        .register-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                var(--color-primary), 
                var(--color-secondary), 
                var(--color-secondary));
            transform: scaleX(0);
            transition: transform var(--transition-normal) ease;
        }

        .register-container:hover::before {
            transform: scaleX(1);
        }

        /* ========== HEADER ========== */
        .register-header {
            background: linear-gradient(135deg, rgba(227, 30, 39, 0.1), rgba(153, 154, 147, 0.05));
            padding: 30px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(145deg, #E31E27, #15151F);
            box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.06), 0 0 18px rgba(227, 30, 39, 0.28);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--color-primary);
            font-weight: bold;
        }

        .brand-name {
            font-size: 28px;
            font-weight: 700;
            color: var(--color-primary);
            text-shadow: 0 0 20px rgba(227, 30, 39, 0.5);
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        .brand-subtitle {
            color: var(--color-text-muted);
            font-size: 14px;
        }

        /* ========== FORM ========== */
        .register-form {
            padding: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--color-text);
            font-weight: 500;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-small);
            color: var(--color-text);
            font-family: var(--font-main);
            font-size: 14px;
            transition: all var(--transition-fast) ease;
            outline: none;
        }

        .form-input:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(227, 30, 39, 0.1);
            background: rgba(255, 255, 255, 0.08);
        }

        .form-input::placeholder {
            color: var(--color-text-muted);
        }

        /* ========== PHONE INPUT STYLES ========== */
        .phone-input-container {
            display: flex;
            gap: 10px;
        }

        .country-code-select {
            flex: 0 0 140px;
            position: relative;
        }

        .country-select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-small);
            color: var(--color-text);
            font-family: var(--font-main);
            font-size: 14px;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12' fill='none'%3E%3Cpath d='M3 5L6 8L9 5' stroke='%23999A93' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 16px center;
            padding-left: 40px;
            transition: all var(--transition-fast) ease;
        }

        .country-select:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(227, 30, 39, 0.1);
            background-color: rgba(255, 255, 255, 0.08);
        }

        .country-flag {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
        }

        .phone-number-input {
            flex: 1;
        }

        /* ========== PASSWORD TOGGLE ========== */
        .password-toggle {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--color-text-muted);
            cursor: pointer;
            font-size: 14px;
            transition: color var(--transition-fast) ease;
        }

        .password-toggle:hover {
            color: var(--color-primary);
        }

        /* ========== TERMS & CONDITIONS ========== */
        .terms-agreement {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin: 25px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-small);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all var(--transition-normal) ease;
        }

        .terms-agreement:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(227, 30, 39, 0.2);
        }

        .terms-agreement input {
            margin-top: 3px;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .terms-text {
            color: var(--color-text-muted);
            font-size: 13px;
            line-height: 1.5;
        }

        .terms-link {
            color: var(--color-primary);
            text-decoration: none;
            transition: all var(--transition-fast) ease;
        }

        .terms-link:hover {
            color: var(--color-neon);
            text-shadow: 0 0 8px var(--color-primary);
        }

        /* ========== BUTTONS ========== */
        .register-button {
            width: 100%;
            padding: 14px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-small);
            font-family: var(--font-main);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-normal) ease;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .register-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left var(--transition-normal) ease;
        }

        .register-button:hover::before {
            left: 100%;
        }

        .register-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-neon);
            filter: brightness(1.1);
        }

        .register-button:active {
            transform: translateY(0);
        }

        .register-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .register-button:disabled:hover {
            transform: none;
            box-shadow: var(--shadow);
            filter: none;
        }

        /* ========== SEPARATOR ========== */
        .separator {
            text-align: center;
            margin: 25px 0;
            position: relative;
            color: var(--color-text-muted);
            font-size: 14px;
        }

        .separator::before {
            content: '';
            position: absolute;
            top: 50%;
            right: 0;
            width: 45%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--color-text-muted));
        }

        .separator::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 45%;
            height: 1px;
            background: linear-gradient(90deg, var(--color-text-muted), transparent);
        }

        /* ========== SOCIAL REGISTER ========== */
        .social-register {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 25px;
        }

        .social-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-small);
            color: var(--color-text);
            text-decoration: none;
            font-size: 14px;
            transition: all var(--transition-normal) ease;
            position: relative;
            overflow: hidden;
        }

        .social-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left var(--transition-normal) ease;
        }

        .social-button:hover::before {
            left: 100%;
        }

        .social-button:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .social-icon {
            font-size: 16px;
        }

        /* ========== FOOTER ========== */
        .register-footer {
            text-align: center;
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.03);
            background: rgba(255, 255, 255, 0.02);
            color: var(--color-text-muted);
            font-size: 14px;
        }

        .login-link {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 500;
            margin-right: 5px;
            transition: all var(--transition-fast) ease;
        }

        .login-link:hover {
            color: var(--color-neon);
            text-shadow: 0 0 8px var(--color-primary);
        }

        /* ========== NOTIFICATION ========== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--color-bg-card);
            border: 1px solid var(--color-primary);
            border-radius: var(--radius-small);
            box-shadow: var(--shadow-neon);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform var(--transition-normal) ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            border-color: #ff4757;
        }

        .notification.success {
            border-color: var(--color-primary);
        }

        /* ========== BACKGROUND EFFECTS ========== */
        .bg-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .grid-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(227, 30, 39, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(227, 30, 39, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .floating-element {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(227, 30, 39, 0.1) 0%, transparent 70%);
            filter: blur(20px);
            animation: float 15s infinite linear;
        }

        .floating-element:nth-child(1) {
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-element:nth-child(2) {
            top: 60%;
            right: 10%;
            animation-delay: -5s;
        }

        .floating-element:nth-child(3) {
            bottom: 20%;
            left: 20%;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(20px, 20px) rotate(90deg);
            }
            50% {
                transform: translate(0, 40px) rotate(180deg);
            }
            75% {
                transform: translate(-20px, 20px) rotate(270deg);
            }
        }

        /* ========== PASSWORD STRENGTH ========== */
        .password-strength {
            margin-top: 8px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .strength-bar {
            height: 100%;
            width: 0%;
            transition: all var(--transition-normal) ease;
            border-radius: 2px;
        }

        .strength-weak { background: #ff4757; width: 33%; }
        .strength-medium { background: #ffa502; width: 66%; }
        .strength-strong { background: #2ed573; width: 100%; }

        .strength-text {
            font-size: 12px;
            color: var(--color-text-muted);
            margin-top: 5px;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 480px) {
            .register-container {
                max-width: 100%;
            }
            
            .register-form {
                padding: 20px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 0;
            }
            
            .social-register {
                grid-template-columns: 1fr;
            }
            
            .phone-input-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .country-code-select {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-effects">
        <div class="grid-pattern"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>

    <!-- Register Container -->
    <div class="register-container">
        <!-- Header -->
        <div class="register-header">
            <div class="logo">SK</div>
            <h1 class="brand-name">Silent Knights</h1>
            <p class="brand-subtitle">ایجاد حساب کاربری جدید</p>
        </div>

        <!-- Form -->
        <form class="register-form" id="registerForm">
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">نام</label>
                    <input type="text" class="form-input" placeholder="نام خود را وارد کنید" required>
                </div>
                <div class="form-group">
                    <label class="form-label">نام خانوادگی</label>
                    <input type="text" class="form-input" placeholder="نام خانوادگی خود را وارد کنید" required>
                </div>
            </div>

            <!-- بخش جدید: نام کاربری -->
            <div class="form-group">
                <label class="form-label">نام کاربری</label>
                <input type="text" class="form-input" id="username" placeholder="نام کاربری خود را انتخاب کنید" required minlength="3">
            </div>

            <div class="form-group">
                <label class="form-label">شماره تلفن</label>
                <div class="phone-input-container">
                    <div class="country-code-select">
                        <select class="country-select" id="countryCode">
                            <!-- کشورها با JavaScript اضافه خواهند شد -->
                        </select>
                    </div>
                    <div class="phone-number-input">
                        <input type="tel" class="form-input" id="phoneNumber" placeholder="شماره تلفن" required>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">آدرس ایمیل</label>
                <input type="email" class="form-input" placeholder="example@domain.com" required>
            </div>

            <div class="form-group">
                <label class="form-label">رمز عبور</label>
                <input type="password" class="form-input" id="password" placeholder="رمز عبور قوی انتخاب کنید" required minlength="8">
                <button type="button" class="password-toggle" id="togglePassword">نمایش</button>
                <div class="password-strength">
                    <div class="strength-bar" id="strengthBar"></div>
                </div>
                <div class="strength-text" id="strengthText">قدرت رمز عبور</div>
            </div>

            <div class="form-group">
                <label class="form-label">تکرار رمز عبور</label>
                <input type="password" class="form-input" id="confirmPassword" placeholder="رمز عبور را تکرار کنید" required>
                <button type="button" class="password-toggle" id="toggleConfirmPassword">نمایش</button>
            </div>

            <div class="terms-agreement">
                <input type="checkbox" id="agreeTerms" required>
                <label for="agreeTerms" class="terms-text">
                    با <a href="#" class="terms-link">قوانین و مقررات</a> و 
                    <a href="#" class="terms-link">سیاست حفظ حریم خصوصی</a> 
                    Silent Knights موافقم
                </label>
            </div>

            <button type="submit" class="register-button" id="registerButton" disabled>ایجاد حساب کاربری</button>

            <div class="separator">یا ثبت‌نام با</div>

            <div class="social-register">
                <a href="#" class="social-button" onclick="registerWithGoogle()">
                    <span class="social-icon">🔐</span>
                    Google
                </a>
                <a href="#" class="social-button" onclick="registerWithGitHub()">
                    <span class="social-icon">💻</span>
                    GitHub
                </a>
            </div>
        </form>

        <!-- Footer -->
        <div class="register-footer">
            قبلاً حساب کاربری دارید؟ 
            <a href="index.html" class="login-link">وارد شوید</a>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        // داده‌های ۱۰۰ کشور برتر جهان
        const countries = [
            // اولویت: افغانستان
            { code: '+93', name: 'افغانستان', flag: '🇦🇫' },
            
            // کشورهای همسایه و مهم
            { code: '+98', name: 'ایران', flag: '🇮🇷' },
            { code: '+92', name: 'پاکستان', flag: '🇵🇰' },
            { code: '+7', name: 'روسیه', flag: '🇷🇺' },
            { code: '+86', name: 'چین', flag: '🇨🇳' },
            { code: '+91', name: 'هند', flag: '🇮🇳' },
            
            // کشورهای عربی
            { code: '+971', name: 'امارات متحده عربی', flag: '🇦🇪' },
            { code: '+966', name: 'عربستان سعودی', flag: '🇸🇦' },
            { code: '+965', name: 'کویت', flag: '🇰🇼' },
            { code: '+974', name: 'قطر', flag: '🇶🇦' },
            { code: '+968', name: 'عمان', flag: '🇴🇲' },
            { code: '+973', name: 'بحرین', flag: '🇧🇭' },
            
            // آسیا
            { code: '+81', name: 'ژاپن', flag: '🇯🇵' },
            { code: '+82', name: 'کره جنوبی', flag: '🇰🇷' },
            { code: '+65', name: 'سنگاپور', flag: '🇸🇬' },
            { code: '+60', name: 'مالزی', flag: '🇲🇾' },
            { code: '+66', name: 'تایلند', flag: '🇹🇭' },
            { code: '+62', name: 'اندونزی', flag: '🇮🇩' },
            { code: '+63', name: 'فیلیپین', flag: '🇵🇭' },
            { code: '+84', name: 'ویتنام', flag: '🇻🇳' },
            { code: '+95', name: 'میانمار', flag: '🇲🇲' },
            { code: '+855', name: 'کامبوج', flag: '🇰🇭' },
            { code: '+856', name: 'لائوس', flag: '🇱🇦' },
            { code: '+880', name: 'بنگلادش', flag: '🇧🇩' },
            { code: '+94', name: 'سریلانکا', flag: '🇱🇰' },
            { code: '+960', name: 'مالدیو', flag: '🇲🇻' },
            { code: '+975', name: 'بوتان', flag: '🇧🇹' },
            { code: '+977', name: 'نپال', flag: '🇳🇵' },
            
            // اروپا
            { code: '+44', name: 'انگلیس', flag: '🇬🇧' },
            { code: '+49', name: 'آلمان', flag: '🇩🇪' },
            { code: '+33', name: 'فرانسه', flag: '🇫🇷' },
            { code: '+39', name: 'ایتالیا', flag: '🇮🇹' },
            { code: '+34', name: 'اسپانیا', flag: '🇪🇸' },
            { code: '+31', name: 'هلند', flag: '🇳🇱' },
            { code: '+32', name: 'بلژیک', flag: '🇧🇪' },
            { code: '+41', name: 'سوئیس', flag: '🇨🇭' },
            { code: '+43', name: 'اتریش', flag: '🇦🇹' },
            { code: '+46', name: 'سوئد', flag: '🇸🇪' },
            { code: '+47', name: 'نروژ', flag: '🇳🇴' },
            { code: '+45', name: 'دانمارک', flag: '🇩🇰' },
            { code: '+358', name: 'فنلاند', flag: '🇫🇮' },
            { code: '+351', name: 'پرتغال', flag: '🇵🇹' },
            { code: '+353', name: 'ایرلند', flag: '🇮🇪' },
            { code: '+30', name: 'یونان', flag: '🇬🇷' },
            { code: '+48', name: 'لهستان', flag: '🇵🇱' },
            { code: '+36', name: 'مجارستان', flag: '🇭🇺' },
            { code: '+420', name: 'جمهوری چک', flag: '🇨🇿' },
            { code: '+40', name: 'رومانی', flag: '🇷🇴' },
            { code: '+381', name: 'صربستان', flag: '🇷🇸' },
            { code: '+385', name: 'کرواسی', flag: '🇭🇷' },
            { code: '+386', name: 'اسلوونی', flag: '🇸🇮' },
            { code: '+370', name: 'لیتوانی', flag: '🇱🇹' },
            { code: '+371', name: 'لتونی', flag: '🇱🇻' },
            { code: '+372', name: 'استونی', flag: '🇪🇪' },
            { code: '+350', name: 'جبل الطارق', flag: '🇬🇮' },
            
            // آمریکای شمالی
            { code: '+1', name: 'آمریکا', flag: '🇺🇸' },
            { code: '+1', name: 'کانادا', flag: '🇨🇦' },
            { code: '+52', name: 'مکزیک', flag: '🇲🇽' },
            { code: '+1', name: 'پورتوریکو', flag: '🇵🇷' },
            { code: '+1', name: 'جمهوری دومینیکن', flag: '🇩🇴' },
            { code: '+501', name: 'بلیز', flag: '🇧🇿' },
            { code: '+506', name: 'کاستاریکا', flag: '🇨🇷' },
            { code: '+503', name: 'السالوادور', flag: '🇸🇻' },
            { code: '+502', name: 'گواتمالا', flag: '🇬🇹' },
            { code: '+504', name: 'هندوراس', flag: '🇭🇳' },
            { code: '+505', name: 'نیکاراگوئه', flag: '🇳🇮' },
            { code: '+507', name: 'پاناما', flag: '🇵🇦' },
            
            // آمریکای جنوبی
            { code: '+55', name: 'برزیل', flag: '🇧🇷' },
            { code: '+54', name: 'آرژانتین', flag: '🇦🇷' },
            { code: '+56', name: 'شیلی', flag: '🇨🇱' },
            { code: '+57', name: 'کلمبیا', flag: '🇨🇴' },
            { code: '+51', name: 'پرو', flag: '🇵🇪' },
            { code: '+58', name: 'ونزوئلا', flag: '🇻🇪' },
            { code: '+593', name: 'اکوادور', flag: '🇪🇨' },
            { code: '+595', name: 'پاراگوئه', flag: '🇵🇾' },
            { code: '+598', name: 'اروگوئه', flag: '🇺🇾' },
            { code: '+591', name: 'بولیوی', flag: '🇧🇴' },
            { code: '+597', name: 'سورینام', flag: '🇸🇷' },
            { code: '+592', name: 'گویان', flag: '🇬🇾' },
            
            // آفریقا
            { code: '+20', name: 'مصر', flag: '🇪🇬' },
            { code: '+27', name: 'آفریقای جنوبی', flag: '🇿🇦' },
            { code: '+234', name: 'نیجریه', flag: '🇳🇬' },
            { code: '+254', name: 'کنیا', flag: '🇰🇪' },
            { code: '+233', name: 'غنا', flag: '🇬🇭' },
            { code: '+212', name: 'مراکش', flag: '🇲🇦' },
            { code: '+216', name: 'تونس', flag: '🇹🇳' },
            { code: '+213', name: 'الجزایر', flag: '🇩🇿' },
            { code: '+251', name: 'اتیوپی', flag: '🇪🇹' },
            { code: '+255', name: 'تانزانیا', flag: '🇹🇿' },
            { code: '+256', name: 'اوگاندا', flag: '🇺🇬' },
            { code: '+260', name: 'زامبیا', flag: '🇿🇲' },
            { code: '+263', name: 'زیمبابوه', flag: '🇿🇼' },
            { code: '+225', name: 'ساحل عاج', flag: '🇨🇮' },
            { code: '+221', name: 'سنگال', flag: '🇸🇳' },
            { code: '+229', name: 'بنین', flag: '🇧🇯' },
            { code: '+226', name: 'بورکینافاسو', flag: '🇧🇫' },
            { code: '+227', name: 'نیجر', flag: '🇳🇪' },
            { code: '+228', name: 'توگو', flag: '🇹🇬' },
            
            // اقیانوسیه
            { code: '+61', name: 'استرالیا', flag: '🇦🇺' },
            { code: '+64', name: 'نیوزیلند', flag: '🇳🇿' },
            { code: '+675', name: 'پاپوآ گینه نو', flag: '🇵🇬' },
            { code: '+679', name: 'فیجی', flag: '🇫🇯' },
            { code: '+676', name: 'تونگا', flag: '🇹🇴' },
            { code: '+677', name: 'جزایر سلیمان', flag: '🇸🇧' },
            { code: '+678', name: 'وانواتو', flag: '🇻🇺' },
            
            // سایر کشورهای مهم
            { code: '+90', name: 'ترکیه', flag: '🇹🇷' },
            { code: '+972', name: 'اسرائیل', flag: '🇮🇱' },
            { code: '+962', name: 'اردن', flag: '🇯🇴' },
            { code: '+961', name: 'لبنان', flag: '🇱🇧' },
            { code: '+963', name: 'سوریه', flag: '🇸🇾' },
            { code: '+964', name: 'عراق', flag: '🇮🇶' },
            { code: '+967', name: 'یمن', flag: '🇾🇪' }
        ];




    // پر کردن dropdown کشورها
    function populateCountryDropdown() {
        const countrySelect = document.getElementById('countryCode');
        
        countries.forEach(country => {
            const option = document.createElement('option');
            option.value = country.code;
            option.textContent = `${country.flag} ${country.name} (${country.code})`;
            countrySelect.appendChild(option);
        });
        
        countrySelect.value = '+93';
    }

    // نمایش/مخفی کردن رمز عبور
    function setupPasswordToggle() {
        const togglePassword = document.getElementById('togglePassword');
        const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');

        togglePassword.addEventListener('click', function() {
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
            this.textContent = type === 'password' ? 'نمایش' : 'مخفی';
        });

        toggleConfirmPassword.addEventListener('click', function() {
            const type = confirmPasswordInput.type === 'password' ? 'text' : 'password';
            confirmPasswordInput.type = type;
            this.textContent = type === 'password' ? 'نمایش' : 'مخفی';
        });
    }

    // بررسی قدرت رمز عبور
    function checkPasswordStrength(password) {
        let strength = 0;
        const strengthBar = document.getElementById('strengthBar');
        const strengthText = document.getElementById('strengthText');

        if (password.length >= 8) strength++;
        if (/[a-z]/.test(password)) strength++;
        if (/[A-Z]/.test(password)) strength++;
        if (/[0-9]/.test(password)) strength++;
        if (/[^A-Za-z0-9]/.test(password)) strength++;

        strengthBar.className = 'strength-bar';
        switch(strength) {
            case 0:
            case 1:
                strengthBar.classList.add('strength-weak');
                strengthText.textContent = 'ضعیف';
                strengthText.style.color = '#ff4757';
                break;
            case 2:
            case 3:
                strengthBar.classList.add('strength-medium');
                strengthText.textContent = 'متوسط';
                strengthText.style.color = '#ffa502';
                break;
            case 4:
            case 5:
                strengthBar.classList.add('strength-strong');
                strengthText.textContent = 'قوی';
                strengthText.style.color = '#2ed573';
                break;
        }
    }

    // اعتبارسنجی فرم
    function validateForm() {
        const form = document.getElementById('registerForm');
        const registerButton = document.getElementById('registerButton');
        const agreeTerms = document.getElementById('agreeTerms');
        
        function checkFormValidity() {
            const inputs = form.querySelectorAll('input[required]');
            let allValid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    allValid = false;
                }
            });
            
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                allValid = false;
            }
            
            if (!agreeTerms.checked) {
                allValid = false;
            }
            
            registerButton.disabled = !allValid;
        }
        
        form.addEventListener('input', checkFormValidity);
        agreeTerms.addEventListener('change', checkFormValidity);
        
        document.getElementById('password').addEventListener('input', function() {
            checkPasswordStrength(this.value);
            checkFormValidity();
        });
        
        document.getElementById('confirmPassword').addEventListener('input', checkFormValidity);
    }

    // نمایش نوتیفیکیشن
    function showNotification(message, type = 'success') {
        const notification = document.getElementById('notification');
        notification.textContent = message;
        notification.className = `notification ${type}`;
        notification.classList.add('show');
        
        setTimeout(() => {
            notification.classList.remove('show');
        }, 5000);
    }

    // بررسی نام کاربری تکراری
    async function checkUsernameAvailability(username) {
        try {
            const response = await fetch('http://localhost:5000/api/check-username', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username: username })
            });

            const data = await response.json();
            return data;
        } catch (error) {
            console.error('Error checking username:', error);
            return { available: false, message: 'خطا در اتصال به سرور' };
        }
    }

    // ثبت‌نام با گوگل
    function registerWithGoogle() {
        showNotification('ثبت‌نام با Google در حال راه‌اندازی...', 'success');
    }

    // ثبت‌نام با GitHub
    function registerWithGitHub() {
        showNotification('ثبت‌نام با GitHub در حال راه‌اندازی...', 'success');
    }

    // ارسال فرم به بک‌اند
    async function handleFormSubmit(event) {
        event.preventDefault();
        
        const formData = {
            name: document.querySelector('input[placeholder="نام خود را وارد کنید"]').value,
            family: document.querySelector('input[placeholder="نام خانوادگی خود را وارد کنید"]').value,
            username: document.getElementById('username').value,
            phone: document.getElementById('phoneNumber').value,
            email: document.querySelector('input[type="email"]').value,
            password: document.getElementById('password').value
        };

        const registerButton = document.getElementById('registerButton');
        registerButton.disabled = true;
        registerButton.textContent = 'در حال ثبت‌نام...';

        try {
            // ابتدا بررسی نام کاربری
            const usernameCheck = await checkUsernameAvailability(formData.username);
            if (!usernameCheck.available) {
                showNotification(usernameCheck.message, 'error');
                registerButton.disabled = false;
                registerButton.textContent = 'ایجاد حساب کاربری';
                return;
            }

            // ارسال درخواست ثبت‌نام
            const response = await fetch('http://localhost:5000/api/register-form', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            });

            const data = await response.json();

            if (data.status === 'success') {
                showNotification(data.message, 'success');
                
                // ریست فرم
                document.getElementById('registerForm').reset();
                document.getElementById('registerButton').disabled = true;
                document.getElementById('registerButton').textContent = 'ایجاد حساب کاربری';
                
                // هدایت به صفحه لاگین بعد از 3 ثانیه
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 3000);
            } else {
                showNotification(data.message, 'error');
                registerButton.disabled = false;
                registerButton.textContent = 'ایجاد حساب کاربری';
            }

        } catch (error) {
            console.error('Error during registration:', error);
            showNotification('خطا در اتصال به سرور', 'error');
            registerButton.disabled = false;
            registerButton.textContent = 'ایجاد حساب کاربری';
        }
    }

    // بررسی نام کاربری هنگام تایپ
    let usernameCheckTimeout;
    document.getElementById('username').addEventListener('input', function() {
        clearTimeout(usernameCheckTimeout);
        const username = this.value;
        
        if (username.length >= 3) {
            usernameCheckTimeout = setTimeout(async () => {
                const result = await checkUsernameAvailability(username);
                if (!result.available) {
                    showNotification(result.message, 'error');
                }
            }, 500);
        }
    });

    // مقداردهی اولیه
    document.addEventListener('DOMContentLoaded', function() {
        populateCountryDropdown();
        setupPasswordToggle();
        validateForm();
        
        document.getElementById('registerForm').addEventListener('submit', handleFormSubmit);
    });
</script>


</body>
</html>
