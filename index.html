<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Silent Knights — Cyber Security Team</title>
  <meta name="theme-color" content="#0A1F44" />
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Fira+Code:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --font-main: "Berlin Sans FB", "Poppins", system-ui, -apple-system, sans-serif;
      --font-mono: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;

      --color-primary: #1E3A8A;
      --color-primary-dark: #0A1F44;
      --color-secondary: #1F4E78;
      --color-bg: #0A0A0A;
      --color-gray: #4B4B4B;
      --color-light: #F1F1F1;

      --radius: 12px;
      --shadow: 0 10px 30px rgba(30,58,138,0.35);
      --nav-height: 64px;
    }

    /* Reset & base */
    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family:var(--font-main);
      background:var(--color-bg);
      color:var(--color-light);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.6;
      min-height:100vh;
    }
    a{color:var(--color-secondary);text-decoration:none}
    img{max-width:100%;height:auto;display:block}
    .muted{color:#a7adb8}

    /* NAV */
    .nav{
      position:sticky;
      top:0;
      z-index:1200;
      backdrop-filter: blur(8px);
      background:linear-gradient(180deg, rgba(10,31,68,0.9), rgba(10,31,68,0.8));
      border-bottom:1px solid rgba(75,75,75,.25);
      height:var(--nav-height);
      display:flex;
      align-items:center;
      box-shadow:0 4px 18px rgba(0,0,0,.4);
      padding:0 16px;
    }
    .nav-inner{
      width:100%;
      max-width:1200px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{display:flex;align-items:center;gap:10px;color:#fff;font-weight:600}
    .brand-badge{width:40px;height:40px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #2e57c7, #0A1F44 70%);box-shadow:inset 0 0 10px rgba(30,58,138,.7)}
    /* menu */
    .menu{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .menu a{
      color:#fff;padding:8px 10px;border-radius:8px;font-weight:500;transition:all .18s;
    }
    .menu a.active,.menu a:hover{background:rgba(30,58,138,.15);box-shadow:0 6px 18px rgba(30,58,138,.12)}

    /* hamburger (mobile) */
    .hamburger{
      display:none;
      background:transparent;border:0;color:#fff;padding:8px;border-radius:8px;
      cursor:pointer;font-size:20px;
    }
    .nav-drawer{
      position:fixed;inset:0;z-index:1150;display:none;
      background:rgba(0,0,0,.45);backdrop-filter:blur(4px);
    }
    .nav-panel{
      position:absolute;top:0;right:0;width:min(320px,85%);height:100%;
      background:linear-gradient(180deg,#07112a,#081a3a);padding:20px;
      box-shadow:-12px 0 40px rgba(0,0,0,.6);
      transform:translateX(100%);transition:transform .28s cubic-bezier(.2,.9,.2,1);
      display:flex;flex-direction:column;gap:18px;
    }
    .nav-panel.open{transform:translateX(0)}
    .nav-panel a{color:#dfe7fb;padding:10px;border-radius:8px}
    .nav-panel .close-btn{margin-left:auto;background:transparent;border:0;color:#fff;font-size:22px;cursor:pointer}

    /* INTRO terminal */
    .intro{
      position:fixed;inset:0;display:grid;place-items:center;z-index:9999;
      background:
        radial-gradient(800px 420px at 50% -10%, rgba(30,58,138,.24), transparent),
        linear-gradient(to right,#0A0A0A,#0A1F44);
      padding:20px;
    }
    .terminal-wrap{
      width:min(920px,96vw);
      max-height:76vh;
      background:#050505;border-radius:14px;border:1px solid #0f0f0f;
      padding:18px;box-shadow:0 0 40px rgba(30,58,138,.12),inset 0 0 24px rgba(0,0,0,.6);
      display:flex;flex-direction:column;gap:8px;
    }
    .term-header{display:flex;align-items:center;gap:12px;color:#c6c9cf;font-family:var(--font-mono);font-size:13px}
    .term-dots{display:flex;gap:6px}
    .dot{width:10px;height:10px;border-radius:50%}
    .dot.r{background:#ff5f56}.dot.y{background:#ffbd2e}.dot.g{background:#27c93f}

    .logo-glitch{
      --size:clamp(30px,5vw,56px);
      font-family:var(--font-main);font-weight:600;text-transform:uppercase;
      color:#dbe9ff;font-size:var(--size);letter-spacing:2px;margin-bottom:6px;
      position:relative;display:inline-block;filter:contrast(1.05) saturate(1.05);
    }
    .logo-glitch::before,.logo-glitch::after{
      content:attr(data-text);position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;mix-blend-mode:screen;opacity:.95;
    }
    .logo-glitch::before{color:rgba(255,59,59,0.95);transform:translate(3px,-2px);clip-path:inset(0 0 60% 0);text-shadow:0 0 12px rgba(255,59,59,.25);animation:gl1 1.8s infinite linear alternate-reverse}
    .logo-glitch::after{color:rgba(0,255,149,0.95);transform:translate(-3px,2px);clip-path:inset(60% 0 0 0);text-shadow:0 0 12px rgba(0,255,149,.18);animation:gl2 1.6s infinite linear alternate}
    @keyframes gl1{0%{clip-path:inset(0 0 85% 0) }25%{clip-path:inset(20% 0 60% 0)}50%{clip-path:inset(40% 0 40% 0)}75%{clip-path:inset(10% 0 70% 0)}100%{clip-path:inset(0 0 85% 0)}}
    @keyframes gl2{0%{clip-path:inset(60% 0 0 0)}20%{clip-path:inset(50% 0 10% 0)}45%{clip-path:inset(30% 0 30% 0)}70%{clip-path:inset(55% 0 5% 0)}100%{clip-path:inset(60% 0 0 0)}}

    .term-body{font-family:var(--font-mono);color:#00ff99;font-size:14px;white-space:pre-wrap;overflow:auto;line-height:1.6;padding-right:6px;max-height:calc(76vh - 120px)}
    .enter-tip{margin-top:10px;font-family:var(--font-mono);color:#8fffd5;font-size:12px;opacity:.95}

    .intro.fade-out{animation:fadeOut .6s ease forwards}
    @keyframes fadeOut{to{opacity:0;visibility:hidden}}

    /* LAYOUT */
    .container{max-width:1200px;margin:0 auto;padding:80px 20px}
    .section-title{font-size:clamp(22px,3vw,32px);color:var(--color-primary);margin-bottom:10px;font-weight:600}
    .section-sub{color:#cfd3dc;margin-bottom:22px}
    .grid{display:grid;gap:18px}
    .grid-3{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .grid-2{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}

    .card{background:#0f0f12;border:1px solid rgba(255,255,255,.03);border-radius:var(--radius);padding:18px;transition:transform .2s,box-shadow .2s}
    .card:hover{transform:translateY(-6px);box-shadow:var(--shadow)}

    .btn{display:inline-block;padding:10px 16px;border-radius:10px;background:var(--color-primary);color:#fff;font-weight:700;border:0;cursor:pointer}
    .btn-outline{background:transparent;border:1px solid var(--color-secondary);color:#fff}
    .btn:hover{filter:brightness(.95)}

    /* HERO */
    .hero{background:
      radial-gradient(1200px 500px at 50% -10%, rgba(30,58,138,.30), transparent),linear-gradient(to right,#0A0A0A,#0A1F44);
      padding:120px 20px 60px;border-bottom:1px solid rgba(75,75,75,.22);text-align:center}
    .hero-inner{max-width:980px;margin:0 auto}
    .hero h1{font-size:clamp(34px,5vw,56px);color:var(--color-primary);margin-bottom:12px;font-weight:700}
    .hero p{color:#c0c8d6;margin:0 auto 20px;max-width:780px}

    /* ABOUT */
    .about{display:grid;grid-template-columns:1.2fr .8fr;gap:22px}
    .about .panel{background:#0e0e11;border:1px solid rgba(255,255,255,.02);padding:18px;border-radius:var(--radius)}
    .about ul{padding-left:20px;list-style:disc;margin-top:10px}

    /* SERVICES icons */
    .service-icon{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;background:rgba(30,58,138,.12);margin-bottom:10px;font-size:18px}

    /* PROJECTS TAGS */
    .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
    .tag{font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(31,78,120,.14);border:1px solid rgba(31,78,120,.28);color:#cfe3ff}

    /* TEAM */
    .avatar{width:72px;height:72px;border-radius:50%;background:linear-gradient(145deg,#1E3A8A,#0A1F44);box-shadow:inset 0 0 12px rgba(255,255,255,.06),0 0 18px rgba(30,58,138,.28);margin-bottom:12px}

    /* CONTACT */
    form{display:grid;gap:12px}
    input,textarea{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #222;background:#0f0f0f;color:#fff;outline:none}
    input:focus,textarea:focus{box-shadow:0 0 0 4px rgba(30,58,138,.12);border-color:#2b3e7a}

    footer{background:var(--color-primary-dark);color:#e6e8ee;padding:24px;text-align:center;border-top:1px solid #14213b}

    /* Responsive tweaks */
    @media (max-width:1000px){
      .intro .terminal-wrap{max-height:70vh}
      .about{grid-template-columns:1fr}
      .hero{padding:90px 20px 50px}
    }
    @media (max-width:720px){
      :root{--nav-height:56px}
      .nav{padding:0 12px}
      .menu{display:none}
      .hamburger{display:inline-flex}
      .nav-drawer{display:block}
      .brand-badge{width:36px;height:36px}
      .hero{padding:70px 16px 40px}
      .hero h1{font-size:28px}
      .terminal-wrap{width:96vw;max-height:58vh;padding:14px;border-radius:12px}
      .logo-glitch{--size:clamp(22px,6vw,40px)}
      .term-body{font-size:13px;max-height:calc(58vh - 120px)}
      .grid-3{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
      .avatar{width:60px;height:60px}
      .nav-panel{width:85%}
    }
    @media (prefers-reduced-motion:reduce){
      *{animation:none!important;transition:none!important}
    }
  </style>
</head>
<body>

  <!-- INTRO -->
  <div id="intro" class="intro" role="dialog" aria-modal="true" aria-label="Intro terminal">
    <div class="terminal-wrap" role="document" aria-live="polite">
      <div class="term-header">
        <div class="term-dots" aria-hidden="true">
          <span class="dot r"></span><span class="dot y"></span><span class="dot g"></span>
        </div>
        <div style="margin-inline-start:10px;font-family:var(--font-mono);font-size:12px;color:#c6c9cf;">/usr/bin/knight-console — UTF-8</div>
      </div>

      <div class="logo-glitch" data-text="Silent Knights">Silent Knights</div>

      <div id="term" class="term-body" aria-hidden="false"></div>

      <div style="display:flex;justify-content:flex-end;align-items:center;gap:12px;margin-top:8px;">
        <div class="enter-tip">فشار <strong style="font-family:var(--font-mono)">Enter</strong> برای ادامه</div>
      </div>
    </div>
  </div>

  <!-- NAV -->
  <header class="nav" id="nav">
    <div class="nav-inner">
      <div class="brand" aria-label="نام سایت">
        <span class="brand-badge" aria-hidden="true"></span>
        <span>Silent Knights</span>
      </div>

      <nav class="menu" aria-label="منوی اصلی">
        <a href="#home" class="active">خانه</a>
        <a href="#about">درباره</a>
        <a href="#services">خدمات</a>
        <a href="#projects">پروژه‌ها</a>
        <a href="#blog">بلاگ</a>
        <a href="#team">تیم</a>
        <a href="#contact">ارتباط</a>
      </nav>

      <button class="hamburger" id="hamburger" aria-label="باز کردن منو" aria-controls="nav-panel" aria-expanded="false">☰</button>
    </div>
  </header>

  <!-- Nav Drawer (mobile) -->
  <div id="nav-drawer" class="nav-drawer" aria-hidden="true">
    <div id="nav-panel" class="nav-panel" role="dialog" aria-modal="true" aria-label="منوی ناوبری">
      <button class="close-btn" id="nav-close" aria-label="بستن منو">✕</button>
      <nav style="display:flex;flex-direction:column;gap:6px;margin-top:6px">
        <a href="#home">خانه</a>
        <a href="#about">درباره</a>
        <a href="#services">خدمات</a>
        <a href="#projects">پروژه‌ها</a>
        <a href="#blog">بلاگ</a>
        <a href="#team">تیم</a>
        <a href="#contact">ارتباط</a>
      </nav>
      <div style="margin-top:auto;color:#cbd8ff;font-size:14px">© 2025 Silent Knights</div>
    </div>
  </div>

  <!-- HERO -->
  <section id="home" class="hero" tabindex="-1" aria-label="صفحه نخست">
    <div class="hero-inner">
      <h1>Silent Knights</h1>
      <p>امنیت سایبری · نفوذ اخلاقی · واکنش به رخداد · آموزش. ما زیرساخت‌های دیجیتال شما را با تیم‌های خبره تقویت می‌کنیم.</p>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:12px">
        <a href="#services" class="btn">مشاهده خدمات</a>
        <a href="#contact" class="btn btn-outline">تماس با ما</a>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="container" aria-labelledby="about-heading">
    <h2 id="about-heading" class="section-title">درباره Silent Knights</h2>
    <p class="section-sub">ما جمعی از متخصصان امنیت و هکرهای کلاه‌سفید هستیم که روی دفاع، پژوهش و افشای مسئولانه کار میکنیم.</p>
    <div class="about" role="region" aria-label="درباره ما">
      <div class="panel">
        <h3 style="font-weight:600">ماموریت و چشم‌انداز</h3>
        <p class="muted">ماموریت: کشف و رفع آسیب‌پذیری‌ها پیش از بهره‌برداری مهاجمین. چشم‌انداز: دنیای دیجیتال امن‌تر با آموزش و طراحی امن.</p>
        <h3 style="font-weight:600;margin-top:12px">ارزش‌ها</h3>
        <ul>
          <li>هک اخلاقی و افشای مسئولانه</li>
          <li>Defense-in-Depth و صفر اعتماد</li>
          <li>پژوهش، آموزش و اجتماع</li>
        </ul>
      </div>
      <div class="panel">
        <h3 style="font-weight:600">نکات برجسته</h3>
        <ul>
          <li>رتبه‌های برتر CTF در رویدادهای محلی و منطقه‌ای</li>
          <li>چندین CVE با افشای مسئولانه</li>
          <li>کارگاه‌ها و برنامه‌های آگاهی‌رسانی عمومی</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="container" aria-labelledby="services-heading">
    <h2 id="services-heading" class="section-title">خدمات</h2>
    <p class="section-sub">آنچه برای سخت‌سازی سیستم‌ها و ارتقای وضعیت امنیتی انجام می‌دهیم.</p>
    <div class="grid grid-3" role="list">
      <article class="card" role="listitem">
        <div class="service-icon" aria-hidden="true">🛡️</div>
        <h3>دفاع سایبری</h3>
        <p class="muted">معماری تیم آبی، راهنمای سخت‌سازی، SIEM و مهندسی تشخیص.</p>
      </article>
      <article class="card" role="listitem">
        <div class="service-icon" aria-hidden="true">🕵️</div>
        <h3>تست نفوذ</h3>
        <p class="muted">وب، API، موبایل، شبکه و ابری با راه‌حل‌های قابل اجرا.</p>
      </article>
      <article class="card" role="listitem">
        <div class="service-icon" aria-hidden="true">🔎</div>
        <h3>ارزیابی آسیب‌پذیری</h3>
        <p class="muted">شناسایی، اولویت‌بندی و پیگیری آسیب‌پذیری‌ها در دارایی‌ها.</p>
      </article>
      <article class="card" role="listitem">
        <div class="service-icon" aria-hidden="true">🚨</div>
        <h3>واکنش به رخداد</h3>
        <p class="muted">تریاژ، فرایندهای فورنزیک، مهار و برنامه‌های بازیابی.</p>
      </article>
      <article class="card" role="listitem">
        <div class="service-icon" aria-hidden="true">🎯</div>
        <h3>رد & پرپل تیمینگ</h3>
        <p class="muted">شبیه‌سازی حمله برای اعتبارسنجی تشخیص و پاسخ.</p>
      </article>
      <article class="card" role="listitem">
        <div class="service-icon" aria-hidden="true">🎓</div>
        <h3>آموزش و آگاهی</h3>
        <p class="muted">کارگاه‌ها، تمرینات میزگردی و شبیه‌سازی‌های فیشینگ.</p>
      </article>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects" class="container" aria-labelledby="projects-heading">
    <h2 id="projects-heading" class="section-title">پروژه‌ها & افشاها</h2>
    <p class="section-sub">نمونه‌کارها، PoC، نوشته‌های CTF و advisories.</p>
    <div class="grid grid-3">
      <article class="card">
        <h3> نفوذ به اپ وب ACME </h3>
        <p class="muted">ارزیابی بلک‌باکس؛ دور زدن احراز هویت و IDOR — هماهنگی برای رفع و retest.</p>
        <div class="tags"><span class="tag">وب</span><span class="tag">IDOR</span><span class="tag">احراز</span></div>
      </article>
      <article class="card">
        <h3>Write-up: Crypto Knights (CTF)</h3>
        <p class="muted">تحلیل چالش RSA padding oracle و ابزار اختصاصی.</p>
        <div class="tags"><span class="tag">CTF</span><span class="tag">رمزنگاری</span><span class="tag">تحلیل</span></div>
      </article>
      <article class="card">
        <h3>Advisory: CVE-2025-XXXX</h3>
        <p class="muted">Stored XSS در widget داشبورد — افشای مسئولانه و انتشار وصله.</p>
        <div class="tags"><span class="tag">Advisory</span><span class="tag">XSS</span><span class="tag">Disclosure</span></div>
      </article>
    </div>
  </section>

  <!-- BLOG -->
  <section id="blog" class="container" aria-labelledby="blog-heading">
    <h2 id="blog-heading" class="section-title">بلاگ</h2>
    <p class="section-sub">نکات، آموزش‌ها و تحلیل تهدید از تیم SK.</p>
    <div class="grid grid-3">
      <article class="card">
        <h3>۱۰ روش جلوگیری از فیشینگ</h3>
        <p class="muted">اقدامات عملی برای کاهش ریسک فیشینگ در سازمان.</p>
        <div style="margin-top:8px"><a href="#contact" class="btn btn-outline">مطالعه</a></div>
      </article>
      <article class="card">
        <h3>صفر اعتماد در تیم‌های کوچک</h3>
        <p class="muted">رویکردی عملی برای تقسیم‌بندی، احراز و کاهش دامنه انفجار.</p>
        <div style="margin-top:8px"><a href="#contact" class="btn btn-outline">مطالعه</a></div>
      </article>
      <article class="card">
        <h3>از هشدار تا تشخیص</h3>
        <p class="muted">تبدیل لاگ‌های پر سروصدا به تشخیص‌های معنادار.</p>
        <div style="margin-top:8px"><a href="#contact" class="btn btn-outline">مطالعه</a></div>
      </article>
    </div>
  </section>

  <!-- TEAM -->
  <section id="team" class="container" aria-labelledby="team-heading">
    <h2 id="team-heading" class="section-title">تیم</h2>
    <p class="section-sub">پژوهشگران، مهندسان و مربیان امنیت به‌صورت تیمی متحد.</p>
    <div class="grid grid-3">
      <article class="card" aria-label="عضو تیم">
        <div class="avatar" aria-hidden="true"></div>
        <h3>SK-Knight</h3>
        <p class="muted">Lead Pentester • Web/API</p>
      </article>
      <article class="card" aria-label="عضو تیم">
        <div class="avatar" aria-hidden="true"></div>
        <h3>SK-Shield</h3>
        <p class="muted">Blue Team • DFIR</p>
      </article>
      <article class="card" aria-label="عضو تیم">
        <div class="avatar" aria-hidden="true"></div>
        <h3>SK-Cipher</h3>
        <p class="muted">Research • Crypto/RE</p>
      </article>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="container" aria-labelledby="contact-heading">
    <h2 id="contact-heading" class="section-title">تماس</h2>
    <p class="section-sub">چالش امنیتی دارید؟ با هم صحبت کنیم.</p>
    <div class="grid grid-2">
      <div class="card">
        <form id="contact-form" onsubmit="event.preventDefault(); alert('ممنون — پیام شما دریافت شد.');">
          <label><span class="muted">نام</span><input type="text" required placeholder="نام شما" /></label>
          <label><span class="muted">ایمیل</span><input type="email" required placeholder="you@example.com" /></label>
          <label><span class="muted">پیام</span><textarea rows="5" required placeholder="درباره نیازتان بنویسید..."></textarea></label>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" type="submit">ارسال</button>
            <button class="btn btn-outline" type="button" onclick="document.getElementById('contact-form').reset();">پاک کردن</button>
          </div>
        </form>
      </div>
      <div class="card">
        <h3 style="font-weight:600">کانال‌ها</h3>
        <p class="muted">ایمیل: contact@silentknights.example<br>گیت‌هاب • لینکدین • X • تلگرام</p>
        <h3 style="font-weight:600;margin-top:12px">PGP</h3>
        <p class="muted">کلید عمومی هنگام درخواست ارائه می‌شود.</p>
      </div>
    </div>
  </section>

  <footer>
    © 2025 Silent Knights — تمامی حقوق محفوظ است
  </footer>

  <script>
    // Intro typing & skip
    (function(){
      const lines = [
        '> Initializing SilentKnights...',
        '> Loading modules: [defense] [redteam] [dfir] [training] — OK',
        '> Handshake TLSv1.3 — OK',
        '> Access Granted [200]',
        'Welcome to SilentKnights Cyber Security Team',
        ''
      ];
      const term = document.getElementById('term');
      const intro = document.getElementById('intro');
      let li = 0, ci = 0, skipped = false;

      function type(){
        if(skipped) return;
        if(li < lines.length){
          const line = lines[li];
          if(ci < line.length){
            term.textContent += line.charAt(ci++);
            setTimeout(type, 18 + Math.random()*40);
          } else {
            term.textContent += '\n';
            li++;ci=0;setTimeout(type, 280);
          }
          term.scrollTop = term.scrollHeight;
        } else {
          setTimeout(closeIntro, 700);
        }
      }
      function closeIntro(){
        if(skipped) return; skipped=true;
        intro.classList.add('fade-out');
        setTimeout(()=>{ try{ intro.remove(); document.getElementById('home').focus(); }catch(e){} },650);
      }
      document.addEventListener('keydown', (e)=>{ if(e.key==='Enter') closeIntro(); if(e.key==='Escape') closeIntro(); });
      intro.addEventListener('click', closeIntro);
      type();
      setTimeout(closeIntro, 7500);
    })();

    // Active menu highlight on scroll (RTL aware)
    (function(){
      const links = Array.from(document.querySelectorAll('nav.menu a'));
      const allLinks = links.concat(Array.from(document.querySelectorAll('#nav-panel nav a')));
      const sections = allLinks.map(a => document.querySelector(a.getAttribute('href')));
      function onScroll(){
        const offset = window.scrollY + (parseInt(getComputedStyle(document.documentElement).fontSize) * 6) + 30;
        let idx = 0;
        sections.forEach((sec,i)=>{ if(sec && sec.offsetTop <= offset) idx = i; });
        links.forEach(l=>l.classList.remove('active'));
        if(links[idx]) links[idx].classList.add('active');
      }
      document.addEventListener('scroll', onScroll, {passive:true});
      onScroll();
    })();

    // Mobile nav toggle
    (function(){
      const hamburger = document.getElementById('hamburger');
      const drawer = document.getElementById('nav-drawer');
      const panel = document.getElementById('nav-panel');
      const closeBtn = document.getElementById('nav-close');

      function openNav(){
        drawer.style.display = 'block';
        panel.classList.add('open');
        drawer.setAttribute('aria-hidden','false');
        hamburger.setAttribute('aria-expanded','true');
        // focus first link
        const first = panel.querySelector('a');
        if(first) first.focus();
        document.body.style.overflow = 'hidden';
      }
      function closeNav(){
        panel.classList.remove('open');
        drawer.setAttribute('aria-hidden','true');
        hamburger.setAttribute('aria-expanded','false');
        document.body.style.overflow = '';
        setTimeout(()=>{ drawer.style.display = 'none'; hamburger.focus(); }, 280);
      }
      hamburger.addEventListener('click', openNav);
      closeBtn.addEventListener('click', closeNav);
      drawer.addEventListener('click', (e)=>{ if(e.target === drawer) closeNav(); });
      // close on link click
      panel.querySelectorAll('a').forEach(a=>a.addEventListener('click', closeNav));
      // escape to close
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && drawer.style.display==='block') closeNav(); });
    })();
  </script>
</body>
</html>
